<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âš”ï¸ ë©€í‹°ì—ì´ì „íŠ¸ vs ë‹¨ì¼ì²´ì¸ ì„±ëŠ¥ ë¹„êµ</title>
    <style>
        body {
            font-family: 'Apple SD Gothic Neo', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .comparison-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }
        
        .systems-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .system-card {
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            background: #f9f9f9;
        }
        
        .system-card.multi-agent {
            border-color: #007AFF;
            background: #f0f7ff;
        }
        
        .system-card.single-chain {
            border-color: #FF6B6B;
            background: #fff0f0;
        }
        
        .system-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .system-title.multi-agent {
            color: #007AFF;
        }
        
        .system-title.single-chain {
            color: #FF6B6B;
        }
        
        .system-description {
            font-size: 14px;
            margin-bottom: 15px;
            color: #666;
        }
        
        .performance-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .metric {
            background: white;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            border: 1px solid #eee;
        }
        
        .metric-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .metric-value {
            font-size: 16px;
            font-weight: bold;
        }
        
        .metric-value.fast {
            color: #28a745;
        }
        
        .metric-value.slow {
            color: #dc3545;
        }
        
        .test-button {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-bottom: 10px;
        }
        
        .test-button.multi-agent {
            background: #007AFF;
            color: white;
        }
        
        .test-button.single-chain {
            background: #FF6B6B;
            color: white;
        }
        
        .test-button:hover {
            opacity: 0.8;
        }
        
        .test-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .test-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 16px;
        }
        
        .results-section {
            margin-top: 30px;
        }
        
        .result-card {
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            background: #f9f9f9;
        }
        
        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .result-title {
            font-weight: bold;
            font-size: 18px;
        }
        
        .result-time {
            font-size: 16px;
            padding: 5px 10px;
            border-radius: 5px;
            color: white;
        }
        
        .result-time.fast {
            background: #28a745;
        }
        
        .result-time.slow {
            background: #dc3545;
        }
        
        .result-content {
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border: 1px solid #eee;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .loading {
            text-align: center;
            color: #666;
            font-style: italic;
        }
        
        .comparison-summary {
            background: #e8f4f8;
            border: 1px solid #b8daff;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }
        
        .winner {
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            color: #007AFF;
            margin-bottom: 15px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        
        .stat-item {
            text-align: center;
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        
        .stat-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="comparison-container">
        <div class="header">
            <h1>âš”ï¸ ë©€í‹°ì—ì´ì „íŠ¸ vs ë‹¨ì¼ì²´ì¸ ì„±ëŠ¥ ë¹„êµ</h1>
            <p>ê°™ì€ ì§ˆë¬¸ìœ¼ë¡œ ë‘ ì‹œìŠ¤í…œì˜ ì„±ëŠ¥ì„ ì§ì ‘ ë¹„êµí•´ë³´ì„¸ìš”!</p>
        </div>
        
        <div class="systems-grid">
            <!-- ë©€í‹°ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ -->
            <div class="system-card multi-agent">
                <div class="system-title multi-agent">ğŸ¤– ë©€í‹°ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ</div>
                <div class="system-description">
                    LangGraph ê¸°ë°˜ìœ¼ë¡œ ê° ë„ë©”ì¸ë³„ ì „ë¬¸ ì—ì´ì „íŠ¸ê°€ ë³‘ë ¬ë¡œ ì‘ì—…í•˜ì—¬ ë¹ ë¥¸ ì‘ë‹µì„ ì œê³µí•©ë‹ˆë‹¤.
                </div>
                <div class="performance-metrics">
                    <div class="metric">
                        <div class="metric-label">ì˜ˆìƒ ì‘ë‹µì‹œê°„</div>
                        <div class="metric-value fast" id="multiAgentTime">~7ì´ˆ</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">ì²˜ë¦¬ ë°©ì‹</div>
                        <div class="metric-value">ë³‘ë ¬</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">LLM ì¸ìŠ¤í„´ìŠ¤</div>
                        <div class="metric-value">6ê°œ</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">ìŠ¤íŠ¸ë¦¬ë°</div>
                        <div class="metric-value fast">ì§€ì›</div>
                    </div>
                </div>
                <button class="test-button multi-agent" onclick="testMultiAgent()" id="multiAgentBtn">
                    ğŸš€ ë©€í‹°ì—ì´ì „íŠ¸ í…ŒìŠ¤íŠ¸
                </button>
            </div>
            
            <!-- ë‹¨ì¼ì²´ì¸ ì‹œìŠ¤í…œ -->
            <div class="system-card single-chain">
                <div class="system-title single-chain">ğŸ”— ë‹¨ì¼ì²´ì¸ ì‹œìŠ¤í…œ</div>
                <div class="system-description">
                    ì „í†µì ì¸ LangChain êµ¬ì¡°ë¡œ í•˜ë‚˜ì˜ LLMì´ ìˆœì°¨ì ìœ¼ë¡œ ëª¨ë“  ì‘ì—…ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
                </div>
                <div class="performance-metrics">
                    <div class="metric">
                        <div class="metric-label">ì˜ˆìƒ ì‘ë‹µì‹œê°„</div>
                        <div class="metric-value slow" id="singleChainTime">~25ì´ˆ</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">ì²˜ë¦¬ ë°©ì‹</div>
                        <div class="metric-value">ìˆœì°¨</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">LLM ì¸ìŠ¤í„´ìŠ¤</div>
                        <div class="metric-value">1ê°œ</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">ìŠ¤íŠ¸ë¦¬ë°</div>
                        <div class="metric-value slow">ë¯¸ì§€ì›</div>
                    </div>
                </div>
                <button class="test-button single-chain" onclick="testSingleChain()" id="singleChainBtn">
                    ğŸŒ ë‹¨ì¼ì²´ì¸ í…ŒìŠ¤íŠ¸
                </button>
            </div>
        </div>
        
        <div class="test-input-section">
            <input 
                type="text" 
                id="testMessage" 
                class="test-input" 
                placeholder="í…ŒìŠ¤íŠ¸í•  ì—¬í–‰ ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ê°€ì¡± 4ëª…ì´ 3ë°•4ì¼ ì œì£¼ë„ ì—¬í–‰ì„ ê³„íš ì¤‘ì…ë‹ˆë‹¤)"
                value="ê°€ì¡± 4ëª…ì´ 3ë°•4ì¼ ì œì£¼ë„ ì—¬í–‰ì„ ê³„íš ì¤‘ì…ë‹ˆë‹¤"
            >
            <div style="text-align: center;">
                <button onclick="testBoth()" id="testBothBtn" style="background: #28a745; color: white; border: none; padding: 15px 30px; border-radius: 8px; font-size: 18px; cursor: pointer;">
                    âš¡ ë™ì‹œ ë¹„êµ í…ŒìŠ¤íŠ¸
                </button>
            </div>
        </div>
        
        <div class="results-section" id="resultsSection" style="display: none;">
            <!-- ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
        </div>
        
        <div class="comparison-summary" id="comparisonSummary" style="display: none;">
            <!-- ë¹„êµ ìš”ì•½ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
        </div>
    </div>

    <script>
        let sessionId = 'comparison-test-' + Date.now();
        let testResults = {};

        async function testMultiAgent() {
            const message = document.getElementById('testMessage').value.trim();
            if (!message) {
                alert('í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const btn = document.getElementById('multiAgentBtn');
            btn.disabled = true;
            btn.textContent = 'ğŸ¤– ì²˜ë¦¬ ì¤‘...';

            try {
                const startTime = Date.now();
                
                const response = await fetch('http://localhost:8001/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        content: message,
                        session_id: sessionId + '_multi',
                        conversation_history: [],
                        user_profile: {},
                        profile_completion: 0.0
                    })
                });

                const data = await response.json();
                const endTime = Date.now();
                const processingTime = (endTime - startTime) / 1000;

                testResults.multiAgent = {
                    response: data.response,
                    time: processingTime,
                    timestamp: new Date().toLocaleTimeString()
                };

                document.getElementById('multiAgentTime').textContent = `${processingTime.toFixed(1)}ì´ˆ`;
                displayResults();

            } catch (error) {
                console.error('ë©€í‹°ì—ì´ì „íŠ¸ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);
                alert('ë©€í‹°ì—ì´ì „íŠ¸ í…ŒìŠ¤íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
            } finally {
                btn.disabled = false;
                btn.textContent = 'ğŸš€ ë©€í‹°ì—ì´ì „íŠ¸ í…ŒìŠ¤íŠ¸';
            }
        }

        async function testSingleChain() {
            const message = document.getElementById('testMessage').value.trim();
            if (!message) {
                alert('í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const btn = document.getElementById('singleChainBtn');
            btn.disabled = true;
            btn.textContent = 'ğŸ”— ì²˜ë¦¬ ì¤‘...';

            try {
                const startTime = Date.now();
                
                const response = await fetch('http://localhost:8003/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        content: message,
                        session_id: sessionId + '_single',
                        conversation_history: [],
                        user_profile: {},
                        profile_completion: 0.0
                    })
                });

                const data = await response.json();
                const endTime = Date.now();
                const processingTime = (endTime - startTime) / 1000;

                testResults.singleChain = {
                    response: data.response,
                    time: processingTime,
                    timestamp: new Date().toLocaleTimeString()
                };

                document.getElementById('singleChainTime').textContent = `${processingTime.toFixed(1)}ì´ˆ`;
                displayResults();

            } catch (error) {
                console.error('ë‹¨ì¼ì²´ì¸ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);
                alert('ë‹¨ì¼ì²´ì¸ í…ŒìŠ¤íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
            } finally {
                btn.disabled = false;
                btn.textContent = 'ğŸŒ ë‹¨ì¼ì²´ì¸ í…ŒìŠ¤íŠ¸';
            }
        }

        async function testBoth() {
            const message = document.getElementById('testMessage').value.trim();
            if (!message) {
                alert('í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const btn = document.getElementById('testBothBtn');
            btn.disabled = true;
            btn.textContent = 'âš¡ ë™ì‹œ í…ŒìŠ¤íŠ¸ ì¤‘...';

            // ê²°ê³¼ ì„¹ì…˜ í‘œì‹œ ë° ë¡œë”© í‘œì‹œ
            document.getElementById('resultsSection').style.display = 'block';
            document.getElementById('resultsSection').innerHTML = `
                <div class="loading">
                    â³ ë‘ ì‹œìŠ¤í…œì„ ë™ì‹œì— í…ŒìŠ¤íŠ¸í•˜ê³  ìˆìŠµë‹ˆë‹¤...<br>
                    ë©€í‹°ì—ì´ì „íŠ¸ëŠ” ì•½ 7ì´ˆ, ë‹¨ì¼ì²´ì¸ì€ ì•½ 25-30ì´ˆê°€ ì˜ˆìƒë©ë‹ˆë‹¤.
                </div>
            `;

            try {
                // ë™ì‹œ ì‹¤í–‰
                const [multiResult, singleResult] = await Promise.allSettled([
                    testSystemAsync('http://localhost:8001/chat', sessionId + '_multi'),
                    testSystemAsync('http://localhost:8003/chat', sessionId + '_single')
                ]);

                if (multiResult.status === 'fulfilled') {
                    testResults.multiAgent = multiResult.value;
                    document.getElementById('multiAgentTime').textContent = `${multiResult.value.time.toFixed(1)}ì´ˆ`;
                }

                if (singleResult.status === 'fulfilled') {
                    testResults.singleChain = singleResult.value;
                    document.getElementById('singleChainTime').textContent = `${singleResult.value.time.toFixed(1)}ì´ˆ`;
                }

                displayResults();
                displayComparison();

            } catch (error) {
                console.error('ë™ì‹œ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);
                alert('í…ŒìŠ¤íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
            } finally {
                btn.disabled = false;
                btn.textContent = 'âš¡ ë™ì‹œ ë¹„êµ í…ŒìŠ¤íŠ¸';
            }
        }

        async function testSystemAsync(url, sessionId) {
            const message = document.getElementById('testMessage').value.trim();
            const startTime = Date.now();
            
            const response = await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    content: message,
                    session_id: sessionId,
                    conversation_history: [],
                    user_profile: {},
                    profile_completion: 0.0
                })
            });

            const data = await response.json();
            const endTime = Date.now();
            const processingTime = (endTime - startTime) / 1000;

            return {
                response: data.response,
                time: processingTime,
                timestamp: new Date().toLocaleTimeString()
            };
        }

        function displayResults() {
            const resultsSection = document.getElementById('resultsSection');
            resultsSection.style.display = 'block';
            
            let html = '';

            if (testResults.multiAgent) {
                html += `
                    <div class="result-card">
                        <div class="result-header">
                            <div class="result-title" style="color: #007AFF;">ğŸ¤– ë©€í‹°ì—ì´ì „íŠ¸ ê²°ê³¼</div>
                            <div class="result-time fast">${testResults.multiAgent.time.toFixed(1)}ì´ˆ</div>
                        </div>
                        <div class="result-content">${testResults.multiAgent.response}</div>
                    </div>
                `;
            }

            if (testResults.singleChain) {
                html += `
                    <div class="result-card">
                        <div class="result-header">
                            <div class="result-title" style="color: #FF6B6B;">ğŸ”— ë‹¨ì¼ì²´ì¸ ê²°ê³¼</div>
                            <div class="result-time slow">${testResults.singleChain.time.toFixed(1)}ì´ˆ</div>
                        </div>
                        <div class="result-content">${testResults.singleChain.response}</div>
                    </div>
                `;
            }

            resultsSection.innerHTML = html;
        }

        function displayComparison() {
            if (!testResults.multiAgent || !testResults.singleChain) return;

            const multiTime = testResults.multiAgent.time;
            const singleTime = testResults.singleChain.time;
            const speedup = ((singleTime - multiTime) / singleTime * 100).toFixed(1);
            const timesDifference = (singleTime / multiTime).toFixed(1);

            const summarySection = document.getElementById('comparisonSummary');
            summarySection.style.display = 'block';
            summarySection.innerHTML = `
                <div class="winner">ğŸ† ë©€í‹°ì—ì´ì „íŠ¸ê°€ ${speedup}% ë” ë¹ ë¦…ë‹ˆë‹¤!</div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-label">ì†ë„ ì°¨ì´</div>
                        <div class="stat-value">${timesDifference}ë°°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">ì‹œê°„ ë‹¨ì¶•</div>
                        <div class="stat-value">${speedup}%</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">ì ˆì•½ëœ ì‹œê°„</div>
                        <div class="stat-value">${(singleTime - multiTime).toFixed(1)}ì´ˆ</div>
                    </div>
                </div>
                <div style="margin-top: 15px; text-align: center; color: #666;">
                    ğŸ“Š ë…¼ë¬¸ ê²°ê³¼: ë©€í‹°ì—ì´ì „íŠ¸ ë³‘ë ¬ ì²˜ë¦¬ê°€ ì „í†µì ì¸ ìˆœì°¨ ì²˜ë¦¬ë³´ë‹¤ ${timesDifference}ë°° ë¹ ë¥¸ ì„±ëŠ¥ì„ ë³´ì˜€ìŠµë‹ˆë‹¤.
                </div>
            `;
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì…ë ¥ì°½ì— í¬ì»¤ìŠ¤
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('testMessage').focus();
        });
    </script>
</body>
</html>
